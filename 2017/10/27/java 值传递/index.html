<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>java值传递 | 湖畔小屋</title><meta name="description" content="java值传递"><meta name="author" content="美式不加糖"><meta name="copyright" content="美式不加糖"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="java值传递"><meta name="twitter:description" content="java值传递"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta property="og:type" content="article"><meta property="og:title" content="java值传递"><meta property="og:url" content="http://yoursite.com/2017/10/27/java%20%E5%80%BC%E4%BC%A0%E9%80%92/"><meta property="og:site_name" content="湖畔小屋"><meta property="og:description" content="java值传递"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://yoursite.com/2017/10/27/java%20%E5%80%BC%E4%BC%A0%E9%80%92/"><link rel="prev" title="spring cloud config 分布式配置中心" href="http://yoursite.com/2017/12/06/spring-cloud-config%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83/"><link rel="next" title="welcome" href="http://yoursite.com/2017/10/22/welcome/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">湖畔小屋</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 清单</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">28</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">9</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">20</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 清单</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#myDog是什么"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">myDog是什么</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#参数传递"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">参数传递</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#string的例子"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">string的例子</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#int的例子"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">int的例子</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#值传递和引用传递"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">值传递和引用传递</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Java的变量都不是对象"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">Java的变量都不是对象</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#狗绳和垃圾回收"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text">狗绳和垃圾回收</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#引用传递的替代方法"><span class="toc_mobile_items-number">8.</span> <span class="toc_mobile_items-text">引用传递的替代方法</span></a></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#myDog是什么"><span class="toc-number">1.</span> <span class="toc-text">myDog是什么</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参数传递"><span class="toc-number">2.</span> <span class="toc-text">参数传递</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#string的例子"><span class="toc-number">3.</span> <span class="toc-text">string的例子</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#int的例子"><span class="toc-number">4.</span> <span class="toc-text">int的例子</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#值传递和引用传递"><span class="toc-number">5.</span> <span class="toc-text">值传递和引用传递</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Java的变量都不是对象"><span class="toc-number">6.</span> <span class="toc-text">Java的变量都不是对象</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#狗绳和垃圾回收"><span class="toc-number">7.</span> <span class="toc-text">狗绳和垃圾回收</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#引用传递的替代方法"><span class="toc-number">8.</span> <span class="toc-text">引用传递的替代方法</span></a></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png)"><div id="post-info"><div id="post-title"><div class="posttitle">java值传递</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2017-10-27<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2020-02-04</time><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><html><head></head><body><hr>
<p>title: java是值传递<br>author: Eric liu<br>tags: [java]<br>categories:</p>
<ul>
<li>knowledge</li>
</ul>
<hr>
<p>java是值传递</p>
<p>方法里面 对对象的进行操作的 会改变，直接对传入的值处理 不会影响</p>
<p>java 值传递 会把 传入的  引用。target1。  copy 一份。  Target2，对target2 处理 </p>
<p>在开始看我画小狗之前，咱们先来看道很简单的题目：<br>下面程序的输出是什么？</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Dog myDog = new Dog("旺财");</span><br><span class="line">changeName(myDog);</span><br><span class="line">System.out.println(myDog.getName());</span><br><span class="line"></span><br><span class="line">public void changeName(dog) {</span><br><span class="line">    dog.setName("小强");</span><br><span class="line">}1234567</span><br></pre></td></tr></tbody></table></figure></div>

<p>如果你的回答是“小强”，好，恭喜你答对了。下面我们改一下代码：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Dog myDog = new Dog("旺财");</span><br><span class="line">changeName(myDog);</span><br><span class="line">System.out.println(myDog.getName());</span><br><span class="line"></span><br><span class="line">public void changeName(dog) {</span><br><span class="line">   dog = new Dog();</span><br><span class="line">   dog.setName("小强");</span><br><span class="line">}12345678</span><br></pre></td></tr></tbody></table></figure></div>

<p>是的，我只是在changeName方法里面加了一句代码</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dog = new Dog();1</span><br></pre></td></tr></tbody></table></figure></div>

<p>这一次的输出又是什么呢？</p>
<ul>
<li>A旺财  </li>
<li>B小强</li>
</ul>
<p>答案是 A旺财，changeName方法并没有把myDog的名称改了。如果你答错了，没关系，我要开始画小狗了，画完你就明白了；如果你答对了，但不太明白其中的原因，那我画的小狗也肯定能帮到你。</p>
<h1 id="myDog是什么"><a href="#myDog是什么" class="headerlink" title="myDog是什么"></a>myDog是什么</h1><p>首先你要搞懂，代码里的变量myDog是什么？<strong>myDog真的就是一只狗吗？不！不是！myDog只是一条遛狗用的狗绳！</strong></p>
<p><a href="http://img.blog.csdn.net/20170905183351498?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHp5MzgzMjQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" target="_blank" rel="noopener" data-fancybox="group" data-caption="这里写图片描述" class="fancybox"><img alt="这里写图片描述" title="这里写图片描述" data-src="http://img.blog.csdn.net/20170905183351498?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHp5MzgzMjQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" class="lazyload"></a></p>
<p>换句话说说，<strong>myDog并不是new出来的放在堆中的对象（object）！myDog只是一个指向这个对象实例的引用（reference）！</strong>如果你对<a href="http://blog.csdn.net/hzy38324/article/details/76706044" target="_blank" rel="noopener">Java的运行时数据区域</a>足够了解，应该知道，这个引用是放在<a href="http://blog.csdn.net/hzy38324/article/details/76706044#t4" target="_blank" rel="noopener">虚拟机栈</a>上的。</p>
<h1 id="参数传递"><a href="#参数传递" class="headerlink" title="参数传递"></a>参数传递</h1><p>现在你知道了，myDog只是一条绳子，但这似乎并不能解释为什么changeName方法没有把myDog的名称改为“小强”，因为按照现有的理解，dog = new Dog()，就是把我的狗绳绑到另一只小狗身上，然后给这只小狗起名为“小强”，就像这样：</p>
<p><a href="http://img.blog.csdn.net/20170905184031951?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHp5MzgzMjQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" target="_blank" rel="noopener" data-fancybox="group" data-caption="这里写图片描述" class="fancybox"><img alt="这里写图片描述" title="这里写图片描述" data-src="http://img.blog.csdn.net/20170905184031951?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHp5MzgzMjQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" class="lazyload"></a></p>
<p>可事实是，myDog还是叫旺财，这是为什么？<br>问题就出在方法调用上，当我执行changeName(myDog)这一行代码时，myDog这条狗绳，被复制了一份，而传入到changeName方法里的那条狗绳（dog），就是复制出来的那一条，就像这样：</p>
<p><a href="http://img.blog.csdn.net/20170905184525389?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHp5MzgzMjQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" target="_blank" rel="noopener" data-fancybox="group" data-caption="这里写图片描述" class="fancybox"><img alt="这里写图片描述" title="这里写图片描述" data-src="http://img.blog.csdn.net/20170905184525389?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHp5MzgzMjQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" class="lazyload"></a></p>
<p>接着执行dog= new Dog()，这一行代码，就是把复制出来的那一条狗绳，从myDog解绑，重新绑到new出来的那只小狗上，也就是后来被起名为“小强”的小狗：</p>
<p><a href="http://img.blog.csdn.net/20170905184312008?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHp5MzgzMjQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" target="_blank" rel="noopener" data-fancybox="group" data-caption="这里写图片描述" class="fancybox"><img alt="这里写图片描述" title="这里写图片描述" data-src="http://img.blog.csdn.net/20170905184312008?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHp5MzgzMjQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" class="lazyload"></a></p>
<p>而myDog还是绑在旺财身上，这也就解释了，为什么执行完方法出来，myDog.getName()还是旺财。而在第一段代码里面，我们没有执行dog= new Dog()，也就没有改变dog所绑的小狗，dog还是绑在旺财身上，因此dog.setName(“小强”) 就把旺财的名字改成小强了。</p>
<h1 id="string的例子"><a href="#string的例子" class="headerlink" title="string的例子"></a>string的例子</h1><p>我们再来看一个例子：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String str = "aaa";</span><br><span class="line">changeString(str);</span><br><span class="line">System.out.println(str);</span><br><span class="line"></span><br><span class="line">public void changeString(String str) {</span><br><span class="line">    str = "bbb";</span><br><span class="line">}1234567</span><br></pre></td></tr></tbody></table></figure></div>

<p>如果你弄懂了上面那个例子，那么这里应该不难理解，changeString方法里，只是将新复制出来的引用str，指向另外一个字符串常量对象“bbb”，方法体外面的str并不受影响，还是指向字符串常量“aaa”，因此最终打印的还是aaa.</p>
<h1 id="int的例子"><a href="#int的例子" class="headerlink" title="int的例子"></a>int的例子</h1><p>上面提到的都是对象，下面看一个基本数据类型的例子</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">int i = 1;</span><br><span class="line">changeInt(i);</span><br><span class="line">System.out.println(i);</span><br><span class="line"></span><br><span class="line">public void changeInt(int i) {</span><br><span class="line">   i = 2;</span><br><span class="line">}1234567</span><br></pre></td></tr></tbody></table></figure></div>

<p>对于基本数据类型，他们没有引用，但是不要忘了，调用函数时，复制的动作还是会做的，执行changeInt(i)时，会将 i 复制到一个新的int上，传给changeInt方法，因此不管changeInt内部对入参做了什么，外面的 i 都不会受影响。最后打印出来的还是1.</p>
<h1 id="值传递和引用传递"><a href="#值传递和引用传递" class="headerlink" title="值传递和引用传递"></a>值传递和引用传递</h1><p>上面提到的参数传递过程中的复制操作，说白了，就是 = 操作。把上面那个int例子，做一下方法内联，其实就是这样：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">int i = 1;</span><br><span class="line"></span><br><span class="line">// 方法内联，相当于执行changeInt方法</span><br><span class="line">int j = i; // 新建一个和i一样的变量</span><br><span class="line">j = 2; //修改j的值，i不变</span><br><span class="line"></span><br><span class="line">System.out.println(i);1234567</span><br></pre></td></tr></tbody></table></figure></div>

<p>对于基本数据类型，= 操作将右边的变量（R_VALUE）完整的复制给左边的变量（L_VALUE），而对于对象，准确的说，应该是指向对象的引用（就像上面说的myDog），= 操作同样也是将右边的引用完整的复制给左边的引用，两者指向同一个对象实例。<br>这个 <strong>= 操作，是值传递和引用传递的根本差别</strong>，这也导致了值传递和引用传递有以下直观上的差别：</p>
<ul>
<li>如果参数是值传递，那么调用者（方法体外部）和被调用者（方法体内部）用的是两个不同的变量，方法体里面对变量的改动不会影响方法体外面的变量。而之所以在Java可以在方法体内部改变方法体外部的对象，是因为方法体内部拿到了对象的引用，但是这个引用是和方法体外部的引用属于两个不同的引用的，方法体内部的引用指向别的对象，不会导致方法体外部的引用也指向别的对象。</li>
<li>如果参数是引用传递，那么调用者（方法体外部）和被调用者（方法体内部）用的是两个相同的变量，方法体里面对变量的改动会影响方法体外面的变量。</li>
</ul>
<h1 id="Java的变量都不是对象"><a href="#Java的变量都不是对象" class="headerlink" title="Java的变量都不是对象"></a>Java的变量都不是对象</h1><p>通过上面的讲解，你也知道了一个很重要的点：<strong>Java里面的变量，要么是基本数据类型，要么是指向对象实例的引用类型（狗绳），绝对不会是一个对象（狗）</strong>。</p>
<h1 id="狗绳和垃圾回收"><a href="#狗绳和垃圾回收" class="headerlink" title="狗绳和垃圾回收"></a>狗绳和垃圾回收</h1><p>弄懂了myDog只是一条狗绳（引用），也有助于我们理解Java的垃圾回收机制，我在<a href="http://blog.csdn.net/hzy38324/article/details/77142103#t5" target="_blank" rel="noopener">另一篇文章</a>里提到过，一旦JVM发现一个对象跟GC Roots不可达时，这个对象就会被回收掉，看一下下面这段代码：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Dog dog = new Dog();</span><br><span class="line">dog = null;12</span><br></pre></td></tr></tbody></table></figure></div>

<p>现在我们知道，dog=null就等于是把狗绳给咔嚓减掉了，这样狗就跑了，变成流浪狗了，就像Java中的对象被当做垃圾回收了一样：</p>
<p>接着再来看一下交叉引用的例子：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Dog dog1 = new Dog();</span><br><span class="line">Dog dog2 = new Dog();</span><br><span class="line">dog1.son = dog2;</span><br><span class="line">dog2.father = dog1;</span><br><span class="line">dog1 = null;</span><br><span class="line">dog2 = null;123456</span><br></pre></td></tr></tbody></table></figure></div>

<p>如果JVM采用的是<a href="http://blog.csdn.net/hzy38324/article/details/77142103#t4" target="_blank" rel="noopener">引用计数法</a>，那么狗2原先被dog2和dog1.son两个变量引用这，执行完dog2 = null之后，还被dog1.son引用，狗2是不会被回收的。<br>但是如果使用<a href="http://blog.csdn.net/hzy38324/article/details/77142103#t5" target="_blank" rel="noopener">可达性分析法</a>，我们就会发现，这两只狗和这个世界已经没有关联了，尽管他们俩还是父子关系，JVM对于这种互相引用，但是和GC ROOTS已经没有关联的对象，照样会进行回收。</p>
<h1 id="引用传递的替代方法"><a href="#引用传递的替代方法" class="headerlink" title="引用传递的替代方法"></a>引用传递的替代方法</h1><p>引用传递有两个好处：</p>
<ul>
<li>引用传递可以<strong>避免调用方法时进行拷贝</strong>，尤其是当方法的入参是个大对象时，拷贝会耗费大量的时间和空间，当然，这一点Java已经巧妙地解决了，因为对于对象，拷贝的只是它的引用而已；</li>
<li>引用传递可以<strong>对外面的对象进行修改</strong>，这也是很多语言支持引用传递的原因。</li>
</ul>
<p>那么，在Java，要怎么实现“对外面的对象进行修改”类似的功能呢？<br>答案是使用<strong>返回值</strong>，类似这样：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = doSomeThing(a);1</span><br></pre></td></tr></tbody></table></figure></div>

<p>当然，如果你只是对一个对象进行修改，然后返回这个对象的新的版本，那么可以考虑把这个方法挪到这个对象里面去，就像这样：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = a.doSomeThing();1</span><br></pre></td></tr></tbody></table></figure></div>

<p>还有，如果你是需要返回多个值，不使用引用传递，要如何实现？<br>答案是<strong>返回一个对象</strong>，比如你想修改一个地方的经度和纬度，那么与其传入log和lat两个变量，不如把他们封装到Point对象里面去。</p>
<p>以上，希望对你有所帮助。</p>
</body></html></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">美式不加糖</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2017/10/27/java%20%E5%80%BC%E4%BC%A0%E9%80%92/">http://yoursite.com/2017/10/27/java%20%E5%80%BC%E4%BC%A0%E9%80%92/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com">湖畔小屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2017/12/06/spring-cloud-config%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>spring cloud config 分布式配置中心</span></div></a></div><div class="next-post pull_right"><a href="/2017/10/22/welcome/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>welcome</span></div></a></div></nav></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By 美式不加糖</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>